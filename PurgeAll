def purge_inbox(email):
    log(f"ğŸ§¹ Purging Mailsac inbox for {email}...")

    r = requests.get(
        f"https://mailsac.com/api/addresses/{email}/messages",
        headers=MAILSAC_HEADERS,
        timeout=20,
    )

    r.raise_for_status()
    messages = r.json()

    for msg in messages:
        delete_message(email, msg["_id"])

    log(f"âœ… Purged {len(messages)} messages for {email}")

/////////////////

def delete_message(email, message_id):
    url = f"https://mailsac.com/api/addresses/{email}/messages/{message_id}"

    r = requests.delete(
        url,
        headers=MAILSAC_HEADERS,
        timeout=20,
    )

    if r.status_code not in (200, 204):
        log(f"âš ï¸ Failed to delete message {message_id}: {r.status_code}")
    else:
        log(f"ğŸ§¹ Deleted message {message_id}")
