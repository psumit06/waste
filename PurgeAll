from datetime import datetime, timezone

def purge_inbox(email, limit=50):
    log(f"üßπ Purging Mailsac inbox for {email}...")

    # Use very old date ‚Üí deletes everything
    until = datetime(1985, 4, 12, 23, 20, 50, tzinfo=timezone.utc).isoformat().replace("+00:00", "Z")

    url = (
        f"https://mailsac.com/api/addresses/{email}/messages"
        f"?until={until}&limit={limit}"
    )

    r = requests.delete(url, headers=MAILSAC_HEADERS, timeout=30)

    if r.status_code not in (200, 204):
        log(f"‚ö†Ô∏è Purge failed: {r.status_code} {r.text}")
    else:
        log("‚úÖ Inbox purged successfully")
